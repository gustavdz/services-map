<div class="animated fadeIn">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 *ngIf="!order" class="h2">Mesas</h1>
    <h1 *ngIf="order" class="h2">Órdenes</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group mr-2">
        <button mat-raised-button color="primary" *ngIf="!order"
                [routerLink]="['/tables', 0]">Agregar</button>
      </div>
    </div>
  </div>

  <h2>Listado de mesas</h2>
  <div class="div-container mat-elevation-z8">

    <div class="div-loading-shade"
         *ngIf="isLoadingResults">
      <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    </div>

    <div class="div-table-container">

      <table mat-table [dataSource]="dataSource" class="div-table"
             matSort matSortActive="created" matSortDisableClear matSortDirection="desc">

        <ng-container matColumnDef="#">
          <th mat-header-cell class="text-left" *matHeaderCellDef>#</th>
          <td mat-cell *matCellDef="let i =index;" class="text-left">{{ i + 1 }}</td>
        </ng-container>

        <ng-container matColumnDef="area">
          <th mat-header-cell *matHeaderCellDef>Área</th>
          <td mat-cell *matCellDef="let row">{{row.area.name}}</td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Nombre</th>
          <td mat-cell *matCellDef="let row">{{row.name}}</td>
        </ng-container>

        <ng-container matColumnDef="number">
          <th mat-header-cell *matHeaderCellDef>Número</th>
          <td mat-cell *matCellDef="let row">{{row.number}}</td>
        </ng-container>

        <ng-container matColumnDef="seats">
          <th mat-header-cell *matHeaderCellDef>Sillas</th>
          <td mat-cell *matCellDef="let row">{{row.seats}}</td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Estado</th>
          <td mat-cell *matCellDef="let row">
            <label *ngIf="row.status == 'A'" class="badge badge-primary">Disponible</label>
            <label *ngIf="row.status == 'T'" class="badge badge-danger">Ocupada</label>
            <label *ngIf="row.status == 'C'" class="badge badge-info">Cocina</label>
            <label *ngIf="row.status == 'P'" class="badge badge-warning">Cuenta</label>
          </td>
        </ng-container>

        <ng-container matColumnDef="options">
          <th mat-header-cell *matHeaderCellDef>Opciones</th>
          <td mat-cell *matCellDef="let row; let i = index">
            <button mat-icon-button *ngIf="!order" [routerLink]="['/tables', row.id]" class="m-r-5">
              <mat-icon color="accent" matTooltip="Editar" matTooltipPosition="left">edit</mat-icon>
            </button>
            <button mat-icon-button *ngIf="!order" (click)="borrarMesa( row, i)" class="alternate-theme m-r-5" >
              <mat-icon color="warn" matTooltip="Borrar" matTooltipPosition="above">delete_outline</mat-icon>
            </button>
            <button mat-icon-button *ngIf="order && row.status == 'A'" [routerLink]="['/orders', 0]" class="alternate-theme m-r-5">
              <mat-icon color="primary" matTooltip="Ordenar" matTooltipPosition="after">description</mat-icon>
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
    <mat-paginator [length]="resultsLength" [pageSize]="10" showFirstLastButtons></mat-paginator>
  </div>
</div>
